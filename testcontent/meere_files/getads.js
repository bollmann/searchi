window.adscale=window.adscale?window.adscale:{ih:"ih.adscale.de/adscale-ih/impr",adex:"dmp.theadex.com/d/173/302/s/adex.js",css:"js.adscale.de/",autoCloseDelay:"3000",uids:"ih.adscale.de/adscale-ih/t.js",response:[]};if(!adscaleNS){var customSlotIdPropertyName="adscale_custom_slot_id";var customSlotIdToken="__"+customSlotIdPropertyName+"__";var customBackfillCallbackIdPropertyName="adscale_custom_cb_id";var customBackfillCallbackIdToken="__"+customBackfillCallbackIdPropertyName+"__";function getAdscaleCustomSlotIdQueryParam(){var a=window[customSlotIdPropertyName];if(a){if(a.length<256){return("&acsid="+encodeURIComponent(a))}}return""}var renderAdexSnippet=(function(){var a=false;return function(){if(!a){a=true;var b=document.createElement("script");b.type="text/javascript";b.async=true;b.src=("https:"===document.location.protocol?"https://":"http://")+window.adscale.adex;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}}})();var adscaleNS={renderAdexSnippet:renderAdexSnippet,adscale_preview:function(){document.write("<div id='adscale_banner_spacer'><!-- AdScale wallpaper spacer --></div>");document.write("<div id='adscale_banner'><h1>Leaderboard advert</h1></div>");document.write("<div id='adscale_skyscraper'><br/><br/><br/><h1>Skyscraper<br/><br/>advert</h1></div>");setTimeout(function(){var b=document.getElementById("adscale_banner_spacer");b.style.position="relative";b.style.width="768px";b.style.height="90px";b.style.margin="0";b.style.padding="0";var a=document.getElementById("adscale_banner");a.style.position="absolute";a.style.width="768px";a.style.height="90px";a.style.background="#0E0";a.style.right="0px";a.style.top="0px";a.style.zIndex="10000";var c=document.getElementById("adscale_skyscraper");c.id="adscale_skyscraper";c.style.position="absolute";c.style.width="160px";c.style.height="600px";c.style.background="#0E0";c.style.right="-160px";c.style.top="0px";c.style.zIndex="10000"},0);if(typeof adscale_wallpaper_callback==="function"){adscale_wallpaper_callback()}adscale_wallpaper_preview=false},init:function(){if(typeof window.adscale_events!=="object"){window.adscale_events={}}if(typeof window.adscale_pup==="undefined"){window.adscale_pup=false}if((typeof adscale_slot_id==="undefined")){return}var a=window.adscale.duplicate_slots;a=a?a:1;var b=(function(){var d=0;var e=window.adscale.response;for(var c=0;c<e.length;c++){if(adscale_slot_id==e[c].sid){d++}}return d})();if(b<a){if(typeof adscaleNS.uid==="undefined"){adscaleNS.writeExternalScript(adscaleNS.getProtocol()+window.adscale.uids)}else{adscaleNS.initialRequest(adscale_slot_id)}}},writeExternalScript:function(a){document.write('<script type="text/javascript" src="'+a+'"><\/script>')},timeAtInitialRequest:0,initialRequest:function(b){adscaleNS.timeAtInitialRequest=(new Date()).getTime();if((typeof adscale_wallpaper_preview!=="undefined")&&adscale_wallpaper_preview){if(typeof window.wallpaper_shown==="undefined"||!window.wallpaper_shown){adscaleNS.adscale_preview();window.wallpaper_shown=true}}else{var c=adscaleNS.getProtocol()+window.adscale.ih;if(adscale_pup){c+=window.location.search}else{var a=(adscaleNS.newUser?"1":"0");c+="?v=2&sid="+b+"&nu="+a+"&t="+adscaleNS.time()+getAdscaleCustomSlotIdQueryParam();c=adscaleNS.appendCommonQueryParams(c,[adscaleNS.detectBelowFold,adscaleNS.detectRefUrl,adscaleNS.appendUserProfileData]);if((typeof adscale_hid!=="undefined")){c+="&hid="+adscale_hid}}adscaleNS.writeExternalScript(c)}},appendCommonQueryParams:function(c,d){var b=adscaleNS;var a=[b.appendAdvertIdList,b.detectRenderPopunderAsIab,b.detectIframe,b.detectHasLayer,b.detectSsl,b.detectX,b.detectPublisherClickUrl].concat(d||[]);while(a.length>0){c=a.shift()(c)}return c},detectX:function(a){if(typeof adscaleNS.uid!=="undefined"){a=a+"&x="+adscaleNS.uid}return a},detectSsl:function(a){return a+"&ssl="+(window.location.protocol=="https:"?"1":"0")},getProtocol:function(){return window.location.protocol=="https:"?"https://":"http://"},detectPublisherClickUrl:function(a){if(typeof adscale_publisher_click_url!=="undefined"){a=a+"&pctu="+encodeURIComponent(adscale_publisher_click_url)}return a},appendUserProfileData:function(c){var f=[];var h=[];var a=function(k){var i=typeof adscale_data[k];return i==="function"||i==="object"||i==="undefined"};if(typeof adscale_data==="object"){for(var j in adscale_data){if(adscale_data.hasOwnProperty(j)){if(a(j)){h.push(j)}else{f.push(j+"="+adscale_data[j])}}}}else{if(typeof adscale_data!=="undefined"){h.push(adscale_data)}else{var d=document.getElementsByTagName("script");for(var e=d.length-1;e>-1;e--){var b=d[e].innerHTML;if(b.indexOf("adscale_data")>-1){var g=b.trim();break}}}}if(h.length>0){c+="&pi="+encodeURIComponent(h.join("&"))}if(g!==undefined){c+="&po="+encodeURIComponent(g)}return c+(f.length>0?"&pt="+encodeURIComponent(f.join("&")):"")},detectBelowFold:function(e){var a=document.getElementsByTagName("script");if(a.length==0){return e}var d=a[a.length-1];d.style.display="inline";var c=function(){var h=window;
var g=h.document.getElementsByTagName("body")[0].clientHeight;while(h!=h.parent){h=h.parent}if(typeof h.innerHeight!="undefined"){if(h.document.compatMode){if(h.document.compatMode=="CSS1Compat"){g=h.document.documentElement.clientHeight}else{g=h.document.body.clientHeight}}else{g=h.innerHeight}}else{if(typeof h.document.documentElement!="undefined"&&typeof h.document.documentElement.clientHeight!="undefined"&&h.document.documentElement.clientHeight!=0){g=h.document.documentElement.clientHeight}}return g};var f=function(h){var g=function(m){var n=0;if(typeof m!=="undefined"){if(m.offsetParent){do{n+=m.offsetTop}while(m=m.offsetParent)}}return n};var l=function(m){var q=0;if(m!=m.parent){var o=m.parent.document.getElementsByTagName("iframe");for(var n=0;n<o.length;n++){if(o[n].contentWindow.window===m){var p=o[n];break}}q=g(p);q+=l(m.parent)}return q};var k=g(h);try{k+=l(window)}catch(j){return""}try{var i=c()}catch(j){return""}return k>i?"&pos=below":"&pos=above"};var b=e+f(d);d.style.display="none";return b},refUrl:function(){var a;if(window!=window.parent){try{if(window.parent.document.referrer!==""){a=window.parent.document.referrer}}catch(b){}}else{if(document.referrer!==""){a=document.referrer}}return a},detectRefUrl:function(e){var b=adscaleNS.refUrl();var d="";if(b!==undefined){var a=b.indexOf("?")!==-1?b.indexOf("?"):b.length;var c=b.substring(0,a);d="&ref="+encodeURI(c)}return e+d},appendPopunderOpenerUrl:function(a){var b=adscaleNS.parseQueryString(window.location.search);if(typeof b.ws!=="undefined"){a=a+"&ws="+b.ws}return a},parseQueryString:function(f){if(f.substring(0,1)==="?"){f=f.substring(1)}var e={};var c=f.split("&");var a=c.length;for(var d=0;d<a;d++){var b=c[d].split("=");e[b[0]]=b[1]}return e},appendPopunderOpenerReferrerUrl:function(a){var b=adscaleNS.parseQueryString(window.location.search);if(typeof b.ref!=="undefined"){a=a+"&ref="+b.ref}return a},detectIframe:function(c){var b="";var a=window.adscale_events.ignore_iframe_detection==true;if(window!=window.parent&&!a){b="&iFrame";try{if(window.parent.document.body.tagName.toLowerCase()!="body"){b=""}}catch(d){}}return c+b},detectRenderPopunderAsIab:function(b){var a="";if(window.adscale_events.render_popunder_as_iab==true){a="&popunderAsIab"}return b+a},detectHasLayer:function(d){var b=window.adscale.response;if(b.length===0){return d}for(var a=0;a<b.length;a++){var c=b[a].type;switch(c){case"layer":case"interstitial":case"layerTag":case"flashLayerTag":return d+"&hasLayer";break;case"targeted":if(!b[a].charge){return d+"&hasLayer"}}}return d},appendAdvertIdList:function(d){var b=window.adscale.response;if(b.length===0){return d}var c=[];for(var a=0;a<b.length;a++){if(typeof(b[a].charge)!=="undefined"&&b[a].charge==false){}else{if(b[a].aid){c.push(b[a].aid)}}}if(c.length>0){d=d+"&apaid="+c.join(",")}return d},callback:function(){var a=window.adscale.response;if(a.length===0){return}var c=a[a.length-1];c.charge=false;var b=adscaleNS.getProtocol()+window.adscale.ih+"?v=2&sid="+c.sid+"&aid="+c.aid+"&iid="+c.iid+"&iidx="+c.iidx+"&hid="+c.hid+"&lb="+c.lb+"&t="+adscaleNS.time()+(c.cbids?"&cbids="+c.cbids:"")+"&nu="+(adscaleNS.newUser?1:0);b=adscaleNS.detectSsl(adscaleNS.appendAdvertIdList(b));b=adscaleNS.detectX(b);adscaleNS.writeExternalScript(adscaleNS.detectPublisherClickUrl(adscaleNS.detectIframe(adscaleNS.detectRenderPopunderAsIab(b))))},callIch:function(b){if(typeof(b.ich)!=="undefined"){var e="?sid="+b.sid+"&aid="+b.aid+"&ctid="+b.ctid+"&ck="+b.ck+"&iid="+b.iid+"&iidx="+b.iidx+(typeof b.rtb!=="undefined"?"&rtb="+b.rtb:"")+"&uu="+b.uu+"&hid="+b.hid+"&t="+adscaleNS.time();var f=new Image();var d=false;f.onload=function(){d=true};f.src=b.ich+e;var a=0;while(!d&&a<1000){a++;for(var c=0;c<1000;c++){}}}},render:function(response){var win=window;win.adscale.response.push(response);var stdocument=win.document;if(win!=win.parent&&typeof(adscale_inDapIF)!=="undefined"&&adscale_inDapIF){var topWindow=win.top;topWindow.adscaleNS=adscaleNS;topWindow.adscale=win.adscale;topWindow.adscale_custom_popunder_config=win.adscale_custom_popunder_config;topWindow.adscale_events=win.adscale_events;win=topWindow}var doc=win.document;var body=doc.body;var renderAdscale=function(response){var img='<img src="'+response.iUrl+'" width="'+response.sX+'" height="'+response.sY+'" style="border:none;">';var anchor='<a href="'+response.cUrl+'" target="_blank">'+img+"</a>";doc.write(anchor)};var notifyPublisherIfBillboard=function(response){var isBillboard=function(){return response.sX==800&&response.sY==250};var isBillboardCallbackDefined=function(){return typeof win.adscale_events.onBillboard==="function"};if(isBillboard()&&isBillboardCallbackDefined()){win.adscale_events.onBillboard()}};var renderIframe=function(response){var iframeObject=createIframe(response);doc.write(iframeObject.strIframe);var iframe=doc.getElementById(iframeObject.id);if(iframe){iframe.src=iframeObject.iframeReq}};var chargeIab=function(){if(doc.readyState==="complete"||doc.readyState==="initialized"||doc.readyState==="loaded"){if(!win.adscale.chargedIab){win.adscale.chargedIab=true;
var responses=win.adscale.response;for(i=0;i<responses.length;i++){var response=responses[i];if(response.charge){adscaleNS.callIch(response)}}}}};var renderCallBack=function(response){response.charge=true;response.callIch=adscaleNS.callIch;doc.write(response.tag);if(doc.readyState==="complete"){chargeIab()}else{addHandler(win,"load",chargeIab);addHandler(doc,"DOMContentLoaded",chargeIab);addHandler(doc,"readystatechange",chargeIab)}};var renderPopunderAsIab=function(response){if(adscale_pup==true){var element=doc.compatMode=="CSS1Compat"?doc.documentElement:body;var outerPopunderDimension=function(){if(typeof win.outerWidth!="undefined"){return{width:win.outerWidth,height:win.outerHeight}}else{if(element.clientWidth){var innerWidth=element.clientWidth;var innerHeight=element.clientHeight;win.resizeTo(innerWidth,innerHeight);var diffWidth=innerWidth-element.clientWidth;var diffHeight=innerHeight-element.clientHeight;var totalWidth=element.clientWidth+diffWidth;var totalHeight=element.clientHeight+diffHeight;return{width:totalWidth,height:totalHeight}}}};var innerPopunderDimension=function(){if(typeof win.innerWidth!="undefined"){return{width:win.innerWidth,height:win.innerHeight}}else{return{width:element.clientWidth,height:element.clientHeight}}};var resizePopunder=function(){var outerDimension=outerPopunderDimension();var innerDimension=innerPopunderDimension();win.resizeTo(response.sX+outerDimension.width-innerDimension.width,response.sY+outerDimension.height-innerDimension.height)};if(typeof window.chrome!=="undefined"){var intervalFunc=function(){if(window.outerHeight>0){resizePopunder()}else{win.setTimeout(intervalFunc,150)}};win.setTimeout(intervalFunc,150)}else{resizePopunder()}}if(typeof response.tag!=="undefined"){doc.write(response.tag)}else{if(response.type=="popUnderShow"){renderIframe(response)}else{var time=adscaleNS.time();var id="adscale_"+time;var iframe='<iframe id="'+id+'" width="'+response.sX+'" scrolling="no" height="'+response.sY+'" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0" src="'+response.url+' "></iframe>';doc.write(iframe)}}adscaleNS.callIch(response);if(typeof win.adscale_events.onPopunder==="function"){win.adscale_events.onPopunder()}};var renderPopUnder=function(response){var popunder=createPopunderConfig(response);var poppedWindow=popunder.openWindowOnLoad();var handlePopunder=function(popwin){if(popwin&&!popunder.hasPopped){popunder.hasPopped=true;popunder.hideWindow(popwin);popunder.charge(response);popunder.removeEventHandlers();popunder.notifyPublisher()}};popunder.eventRequired(poppedWindow,handlePopunder)};var createPopunderUrl=function(response){if(response.type=="popUnderShow"){return adscaleNS.detectPublisherClickUrl(response.show+"?v=2&sid="+response.sid+"&aid="+response.aid+"&iid="+response.iid+"&iidx="+response.iidx+"&hid="+response.hid+"&lb="+response.lb+"&uu="+response.uu+"&nx&t="+adscaleNS.time())}else{if(response.type=="popUnderAttempt"){response.url+="&pup=true";response.url+="&ws="+encodeURIComponent(win.location.href)}}return response.url};var createPopunderOptions=function(response){var left;var top;if(body.attachEvent){left=win.screenLeft;top=win.screenTop}else{left=win.screenX;top=win.screenY}var width=response.sX;var googleAddressBarOffset=30;var height=typeof win.chrome!=="undefined"?response.sY+googleAddressBarOffset:response.sY;if(adscaleNS.isFirefox()){height=(1/win.devicePixelRatio*response.sY);width=(1/win.devicePixelRatio*response.sX)}return"status=1, resizable=yes, scrollbars=no, width="+width+", height= "+height+", left="+left+", top="+top};var createPopunderConfig=function(response){if(typeof adscale_custom_popunder_config!=="object"){win.adscale_custom_popunder_config={}}else{win.adscale_custom_popunder_config=adscale_custom_popunder_config}if(typeof win.adscale_custom_popunder_config.events==="undefined"){win.adscale_custom_popunder_config.events=["click"]}if(typeof win.adscale_custom_popunder_config.excludes==="undefined"){win.adscale_custom_popunder_config.excludes=[]}var popunder={};var events=[];var url=createPopunderUrl(response);var options=createPopunderOptions(response);hasPopped=false;popunder.openWindowOnLoad=function(){return win.open(url,"_blank",options)};popunder.openWindowOnEvent=function(e,callback){if(popunder.isTagExcluded(e)){return}callback(win.open(url,"_blank",options))};popunder.eventRequired=function(poppedWindow,callback){if(poppedWindow!=null){callback(poppedWindow)}popunder.addCustomEventHandlers(callback)};popunder.removeEventHandlers=function(){for(var i=0;i<events.length;i++){removeHandler(body,events[i].name,events[i].handler)}};popunder.addCustomEventHandlers=function(callback){for(var i=0;i<win.adscale_custom_popunder_config.events.length;i++){var eventName=popunder.getEventName(win.adscale_custom_popunder_config.events[i]);var popHandler=function(e){if(!popunder.hasPopped){popunder.openWindowOnEvent(e,callback)}};addHandler(body,eventName,popHandler);events[events.length]={name:eventName,handler:popHandler}
}};popunder.getEventName=function(event){var eventName=event;if(eventName.substring(0,2)==="on"){eventName=eventName.substring(2,eventName.length)}return eventName};popunder.isTagExcluded=function(e){var tagname=(e.target)?e.target.localName:e.srcElement.nodeName;for(var i=0;i<win.adscale_custom_popunder_config.excludes.length;i++){if(tagname.toLowerCase()===win.adscale_custom_popunder_config.excludes[i]){return true}}return false};popunder.hideWindow=function(poppedWindow){poppedWindow.blur();win.focus();setTimeout(function(){poppedWindow.blur()},200)};popunder.charge=function(resp){adscaleNS.callIch(resp);popunder.hasPopped=true};popunder.notifyPublisher=function(){if(typeof win.adscale_events.onPopunder==="function"){win.adscale_events.onPopunder()}};var webkitTriple=function(e,callback){if(popunder.isTagExcluded(e)){return}win.open("javascript:window.focus()","_self");popunder.removeEventHandlers();var newWindow=win.open("about:blank","_blank",options);var anchor=document.createElement("a");anchor.style.display="none";anchor.setAttribute("href","data:text/html,<script>window.close();<\/script>");document.body.appendChild(anchor);var mouseEvent=document.createEvent("MouseEvents");mouseEvent.initMouseEvent("click",true,true,win,0,0,0,0,0,true,false,false,true,0,null);anchor.dispatchEvent(mouseEvent);document.body.removeChild(anchor);newWindow.document.open().write('<script type="text/javascript">window.location="'+url+'";<\/script>');newWindow.document.close();callback(newWindow)};var webkitTabOpen=function(e,callback){if(popunder.isTagExcluded(e)){return}popunder.removeEventHandlers();var link=document.createElement("a");link.href=url;link.setAttribute("target","_blank");top.window.document.body.appendChild(link);var mouseEvent=document.createEvent("MouseEvents");mouseEvent.initMouseEvent("click",true,true,win,0,0,0,0,0,true,false,false,true,0,null);link.dispatchEvent(mouseEvent);callback(true)};var noop=function(){};var agent=navigator.userAgent;if(agent.appName==="Netscape"&&agent.userAgent&&agent.userAgent.indexOf("Trident")!==-1){setTimeout(function(){win.focus()},250);setTimeout(function(){win.focus()},350)}if(adscaleNS.isInternetExplorer()){popunder.openWindowOnLoad=function(){return win.open("/robots.txt","_blank",options)};popunder.openWindowOnEvent=function(e,callback){if(popunder.isTagExcluded(e)){return}callback(win.open("/robots.txt","_blank",options))};popunder.hideWindow=function(poppedWindow){poppedWindow.blur();doc.focus();setTimeout(function(){poppedWindow.location=url},500)}}if(adscaleNS.isFirefox()){var firefoxVersionMatch=agent.match(/Firefox\/(\d+\.\d+)/);if(firefoxVersionMatch&&firefoxVersionMatch.length===2){var ffVersion=Number(firefoxVersionMatch[1]);if(ffVersion>=4){popunder.openWindowOnLoad=function(){return win.open("javascript:document.write('');document.close();","_blank",options)};popunder.openWindowOnEvent=function(e,callback){if(popunder.isTagExcluded(e)){return}var poppedWindow=win.open(url,"_blank",options);if(!poppedWindow){if(console){console.warn("can not open popunder on event : "+e.type)}return}poppedWindow.open("about:blank").close();poppedWindow.blur();var tab=win.open("about:blank");tab.focus();tab.close();win.focus();callback(poppedWindow)};popunder.eventRequired=function(poppedWindow,callback){if(poppedWindow==null){popunder.addCustomEventHandlers(callback)}else{response.popunderHasFocus=true;addHandler(poppedWindow,"focus",function(){response.popunderHasFocus=true});addHandler(poppedWindow,"blur",function(){response.popunderHasFocus=false});poppedWindow.blur();var tab=win.open("about:blank");setTimeout(function(){tab.focus();tab.close();win.focus();if(!response.popunderHasFocus){poppedWindow.location=url;callback(poppedWindow)}else{poppedWindow.close();popunder.addCustomEventHandlers(callback)}},0)}}}}}if(typeof win.chrome!=="undefined"){var chromeRegExp=/Chrome\/(\d+)\.\d+/;var chromeVersionMatch=agent.match(chromeRegExp);if(chromeVersionMatch&&chromeVersionMatch.length===2){var chromeMajorVersion=parseInt(chromeVersionMatch[1]);popunder.openWindowOnLoad=function(){return null};if(chromeMajorVersion>=43){popunder.openWindowOnEvent=noop}else{win.adscale.mouse={x:0,y:0,t:body};popunder.openWindowOnEvent=function(callback){var poppedWindow=win.open(url,"_blank",options);callback(poppedWindow);hideFlash();removeHandler(doc,"mousemove",flashMouseTracking)};popunder.eventRequired=function(poppedWindow,callback){doc.body?writeflash():setTimeout(writeflash,2000);win.adscale.pu={left:function(){popunder.openWindowOnEvent(callback);win.adscale.mouse.t.click();win.adscale.mouse.t.focus()},right:function(){popunder.openWindowOnEvent(callback);win.adscale.mouse.t.focus()},cursor:function(){return findCursor(win.adscale.mouse.t)}}};function findCursor(t){switch(t.tagName.toLowerCase()){case"input":switch(t.type.toLowerCase()){case"text":console.log("what is t? "+t);return"ibeam"}break;case"textarea":return"ibeam";case"a":case"link":return"button"}return t.parentElement?findCursor(t.parentElement):"arrow"
}function writeflash(){var o=setAttributes(document.createElement("object"),{type:"application/x-shockwave-flash",id:"adscale-overlay",name:"adscale-overlay",data:"//"+window.adscale.css+"taylor.swf",style:"position:fixed;visibility:visible;left:0;top:0;width:100%;height:100%;z-index:999999;overflow:hidden;"});o.appendChild(setAttributes(doc.createElement("param"),{name:"wmode",value:"transparent"}));o.appendChild(setAttributes(doc.createElement("param"),{name:"menu",value:"false"}));o.appendChild(setAttributes(doc.createElement("param"),{name:"allowScriptAccess",value:"always"}));doc.body.insertBefore(o,doc.body.firstChild)}function hideFlash(){var e=doc.getElementById("adscale-overlay");e.style.visibility="hidden"}function showFlash(){var e=doc.getElementById("adscale-overlay");e.style.visibility="visible"}function flashMouseTracking(e){win.adscale.mouse.x=e.clientX||e.pageX;win.adscale.mouse.y=e.clientY||e.pageY;hideFlash();win.adscale.mouse.t=t=doc.elementFromPoint(win.adscale.mouse.x,win.adscale.mouse.y);switch(t.tagName.toLowerCase()){case"iframe":case"object":case"embed":return}showFlash()}addHandler(doc,"mousemove",flashMouseTracking);function setAttributes(e,t){for(var n in t){e.setAttribute(n,t[n])}return e}}}}if(agent.indexOf("Safari")!=-1){var safariVersionRegex=/Version\/(\d+)\.\d+/;var safariVersionMatch=agent.match(safariVersionRegex);if(safariVersionMatch&&safariVersionMatch.length===2&&(parseInt(safariVersionMatch[1])>=6)){popunder.openWindowOnEvent=webkitTriple}}return popunder};var loadModule=function(moduleName,moduleDocumentWrites){var mdw=(typeof moduleDocumentWrites=="undefined")?true:moduleDocumentWrites;var src=adscaleNS.getProtocol()+win.adscale.css+"/"+moduleName+".js";if(mdw){adscaleNS.writeExternalScript(src);return null}else{var s=doc.createElement("script");s.src=src;doc.getElementsByTagName("head").item(0).appendChild(s);return s}};var doInterstitial=function(response,script){response.callbackScript=script;win.adscale.exposed={callIch:adscaleNS.callIch,createDiv:createDiv,addHandler:addHandler,removeHandler:removeHandler,createIframe:createIframe};var isInterstitialCallback=script!=null;response.interstitialScript=loadModule("interstitial",isInterstitialCallback)};var doMobileInterstitial=function(response){win.adscale.exposed={callIch:adscaleNS.callIch,createDiv:createDiv,addHandler:addHandler,removeHandler:removeHandler,createIframe:createIframe};response.interstitialScript=loadModule("mobile-interstitial",false)};var renderLayer=function(){win.adscale.exposed={createDiv:createDiv,addHandler:addHandler,removeHandler:removeHandler,createTagRequest:function(resp){return createIframe(resp).iframeReq}};win.adscale.response[win.adscale.response.length-1].layerScript=loadModule("layer",false)};var renderLayerUrl=function(response){renderLayer();adscaleNS.callIch(response)};var createDiv=function(){var div=doc.createElement("div");if(arguments[0]!=null){div.className=arguments[0]}return div};var createIframe=function(response){var time=adscaleNS.time();var id="adscale_"+time;var aid;if(response.type=="text"){aid=response.aid.join(",")}else{aid=response.aid}var iframeReq=adscaleNS.detectPublisherClickUrl(response.show+"?v=2&sid="+response.sid+"&aid="+aid+"&iid="+response.iid+"&iidx="+response.iidx+"&hid="+response.hid+"&uu="+response.uu+"&lb="+response.lb+adscaleNS.detectSsl("")+"&t="+time);var strIframe='<iframe id="'+id+'" width="'+response.sX+'" height="'+response.sY+'" frameborder="0" marginheight="0" marginwidth="0" scrolling="no" allowTransparency="true"></iframe>';return{id:id,iframeReq:iframeReq,strIframe:strIframe}};var addHandler=function(el,evtName,handler){if(el.addEventListener){el.addEventListener(evtName,handler,false)}else{if(el.attachEvent){el.attachEvent("on"+evtName,handler)}}};var removeHandler=function(el,evtName,handler){if(el.removeEventListener){el.removeEventListener(evtName,handler,false)}else{if(el.detachEvent){el.detachEvent("on"+evtName,handler)}}};var callTargeting=function(response){adscaleNS.renderTargetedAdvert=function(script){if(script==null){return}if(script===""){adscaleNS.callback()}else{doInterstitial(response,script);if(win.adscale_charged_callback){win.adscale_charged_callback()}}};win.adscale_close_interstitial=function(){setTimeout(function(){var message="adscale_close_interstitial";if(win.postMessage){win.postMessage(message,"*")}else{win.name=message}},adscale.autoCloseDelay)};doc.write(response.target)};var renderComeBackLater=function(response){var start=new Date().getTime();var diff=start-adscaleNS.timeAtInitialRequest;if(diff<100){var delay=100-diff;while(new Date().getTime()<start+delay){}}var newUserFlag=(adscaleNS.newUser?"1":"0");var uri=response.rtb+"?v=2&iid="+response.iid+"&iidx="+response.iidx+"&hid="+response.hid+"&sid="+response.sid+"&lb="+response.lb+"&nu="+newUserFlag+"&uu="+response.uu+(adscale_pup?"&pup=true":"");var additionalFuncs=adscale_pup?[adscaleNS.appendPopunderOpenerReferrerUrl,adscaleNS.appendPopunderOpenerUrl]:[adscaleNS.detectRefUrl];
uri=adscaleNS.appendCommonQueryParams(uri,additionalFuncs);adscaleNS.writeExternalScript(uri)};if(response.type){if(adscaleNS.newUser===undefined){adscaleNS.newUser=response.nu==1}if(response.st&&adscaleNS.tagsWritten===undefined){for(var i=0;i<response.st.length;i++){stdocument.write(response.st[i])}adscaleNS.tagsWritten=true}if(typeof response.ax!=="undefined"&&response.ax){adscaleNS.renderAdexSnippet()}function replaceBackfillTokens(data){function replaceTokenWithWindowProperty(text,prop,pattern){return text.replace(pattern,win[prop])}data=replaceTokenWithWindowProperty(data,customSlotIdPropertyName,/__adscale_custom_slot_id__/gi);data=replaceTokenWithWindowProperty(data,customBackfillCallbackIdPropertyName,/__adscale_custom_cb_id__/gi);return data}function isValidBackfill(responseData){function validateToken(property,token){if(responseData.indexOf(token)!==-1){var prop=win[property];return prop&&prop.match(/^[a-zA-Z0-9ÄäÜüÖöß/_\.\-]{1,255}$/)}else{return true}}return validateToken(customSlotIdPropertyName,customSlotIdToken)&&validateToken(customBackfillCallbackIdPropertyName,customBackfillCallbackIdToken)}if(response.sj){try{eval(response.sj)}catch(err){if(console){console.error(err)}}}switch(response.type){case"backfill":if(adscale_pup==true){win.close()}else{if(isValidBackfill(response.data)){doc.write(replaceBackfillTokens(response.data))}}break;case"adscaleAd":renderAdscale(response);break;case"popUnderShow":case"popUnder":if(win.adscale_events.render_popunder_as_iab==true||adscale_pup==true){renderPopunderAsIab(response)}else{renderPopUnder(response)}break;case"popUnderAttempt":renderPopUnder(response);break;case"interstitial":doInterstitial(response,null);break;case"mobileInterstitial":doMobileInterstitial(response);break;case"targeted":callTargeting(response);break;case"callback":renderCallBack(response);break;case"layer":renderLayerUrl(response);break;case"layerTag":renderLayer();break;case"banner":case"tag":renderIframe(response);notifyPublisherIfBillboard(response);break;case"text":renderIframe(response);break;case"popUnderThirdParty":case"expandable":case"flashLayerTag":case"tandem":case"inlineTag":doc.write(response.data);break;case"cbl":renderComeBackLater(response);break;case"blank":if(adscale_pup==true){win.close()}return}}},isInternetExplorer:function(){var c=window.navigator.userAgent;var a=c.indexOf("MSIE ");var b=c.indexOf("Trident/");if((a>-1)||(b>-1)){return true}},isFirefox:function(){return(navigator.userAgent.indexOf("Firefox")!=-1)},time:function(){var a=window.adscale.time?window.adscale.time:(new Date()).getTime();window.adscale.time=null;return a}}}adscaleNS.init();
